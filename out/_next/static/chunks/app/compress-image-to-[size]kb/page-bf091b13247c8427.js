(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{1809:function(e,s,t){Promise.resolve().then(t.bind(t,7547))},7547:function(e,s,t){"use strict";t.r(s),t.d(s,{ImageCompressor:function(){return S}});var a=t(7437),l=t(2265),r=t(8063),i=t(1541),n=t(3715),o=t(8438),d=t(5817),m=t(7042),c=t(4769);function x(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,c.m6)((0,m.W)(s))}let u=l.forwardRef((e,s)=>{let{className:t,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:x("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});u.displayName="Input";var f=t(4949),h=t(9213);let g=(0,h.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),b=l.forwardRef((e,s)=>{let{className:t,variant:l,size:r,asChild:i=!1,...n}=e,o=i?f.g7:"button";return(0,a.jsx)(o,{className:x(g({variant:l,size:r,className:t})),ref:s,...n})});b.displayName="Button";let p=(0,h.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),v=l.forwardRef((e,s)=>{let{className:t,variant:l,...r}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:x(p({variant:l}),t),...r})});v.displayName="Alert";let j=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h5",{ref:s,className:x("mb-1 font-medium leading-none tracking-tight",t),...l})});j.displayName="AlertTitle";let N=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:x("text-sm [&_p]:leading-relaxed",t),...l})});N.displayName="AlertDescription";var w=t(2536);function y(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KB":(e/1048576).toFixed(2)+" MB"}async function z(e,s,t){let a=1024*s,l=e.size;if(l<=a)return null==t||t(100),{blob:e,compressedSize:l};let r=a/l,i=1920;s<50?i=800:s<100?i=1200:s<500&&(i=1600);let n={maxSizeMB:s/1024,maxWidthOrHeight:i,useWebWorker:!0,initialQuality:r<.1?.2:r<.5?.5:.8,alwaysKeepResolution:!1,fileType:e.type},o=0,d=1,m=e,c=0;for(;c<6;){null==t||t(c/6*100);try{m=await (0,w.Z)(e,n)}catch(e){throw console.error("Compression failed",e),e}let s=m.size;if(s<=a&&s>.85*a)break;s<.85*a?(o=n.initialQuality,n.initialQuality=(o+d)/2):(d=n.initialQuality,n.initialQuality=(o+d)/2,n.initialQuality<.2&&s>a&&(n.maxWidthOrHeight=Math.floor(.8*n.maxWidthOrHeight))),c++}return null==t||t(100),{blob:m,compressedSize:m.size}}function S(e){let{defaultTargetSize:s,showHero:t=!0}=e,[m,c]=(0,l.useState)(s.toString()),[x,f]=(0,l.useState)(!1),[h,g]=(0,l.useState)(null),[p,j]=(0,l.useState)(null),[w,S]=(0,l.useState)(null),[k,C]=(0,l.useState)(null),[R,T]=(0,l.useState)(0),[F,D]=(0,l.useState)(0),[P,O]=(0,l.useState)(!1),[W,A]=(0,l.useState)(0),[B,E]=(0,l.useState)(null);(0,l.useEffect)(()=>{c(s.toString())},[s]),(0,l.useEffect)(()=>{S(null),C(null),D(0)},[m]);let I=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?f(!0):"dragleave"===e.type&&f(!1)},L=e=>{if(!e.type.startsWith("image/")){E("Please upload an image file"),setTimeout(()=>E(null),5e3);return}g(e),T(e.size),S(null),C(null),E(null);let s=new FileReader;s.onload=e=>{var s;j(null===(s=e.target)||void 0===s?void 0:s.result)},s.readAsDataURL(e)},Z=async()=>{if(!h)return;let e=parseInt(m);if(isNaN(e)||e<=0){E("Please enter a valid target size"),setTimeout(()=>E(null),5e3);return}let s=1024*e,t=s/R;if(t<.05){E("Target size is too small for this image. Please try a larger size (at least 5% of original size)."),setTimeout(()=>E(null),7e3);return}if(s>=R){E("Target size is larger than the original image. No compression needed."),setTimeout(()=>E(null),5e3);return}O(!0),A(0),E(null);try{let s=await z(h,e,e=>A(e));S(s.blob),D(s.compressedSize);let t=new FileReader;t.onload=e=>{var s;C(null===(s=e.target)||void 0===s?void 0:s.result)},t.readAsDataURL(s.blob)}catch(e){console.error("Compression error:",e),E("Failed to compress image. The target size might be too small or the image is too complex. Please try a larger size."),setTimeout(()=>E(null),7e3)}finally{O(!1),A(0)}};return(0,a.jsxs)(a.Fragment,{children:[t&&!h&&(0,a.jsxs)("div",{className:"text-center mb-8 sm:mb-12",children:[(0,a.jsxs)("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-slate-900 mb-3 sm:mb-4 leading-tight px-4",children:["Compress Image to",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-slate-700 to-slate-900 bg-clip-text text-transparent",children:"Specific Size (KB)"})]}),(0,a.jsx)("p",{className:"text-base sm:text-lg lg:text-xl text-slate-600 max-w-2xl mx-auto px-4",children:"Resize and compress your images to an exact file size with precision and ease"})]}),B&&(0,a.jsxs)(v,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),(0,a.jsx)(N,{children:B})]}),h?(0,a.jsxs)("div",{className:"space-y-6 sm:space-y-8 relative",children:[P&&(0,a.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-2xl max-w-sm mx-4 text-center",children:[(0,a.jsx)(n.Z,{className:"h-16 w-16 animate-spin text-slate-700 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Compressing Image"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:"Please wait while we optimize your image..."}),(0,a.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-slate-700 h-3 rounded-full transition-all duration-300",style:{width:"".concat(Math.round(W),"%")}})}),(0,a.jsxs)("p",{className:"text-sm text-slate-600 mt-2 font-semibold",children:[Math.round(W),"%"]})]})}),(0,a.jsx)("div",{className:"flex flex-col gap-4 bg-white rounded-xl border border-slate-200 p-5 sm:p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 max-w-[200px]",children:[(0,a.jsx)("label",{htmlFor:"targetSizeActive",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Target Size (KB)"}),(0,a.jsx)(u,{id:"targetSizeActive",type:"number",value:m,onChange:e=>c(e.target.value),className:"text-lg h-11 sm:h-12",placeholder:s.toString(),min:"1",disabled:P})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[(0,a.jsx)(b,{onClick:Z,disabled:P,className:"w-full sm:w-auto h-11 sm:h-12 px-6 sm:px-8 text-base font-semibold order-1",children:P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Compressing..."]}):"Compress"}),(0,a.jsx)(b,{onClick:()=>{g(null),j(null),S(null),C(null),T(0),D(0),E(null)},variant:"outline",disabled:P,className:"w-full sm:w-auto h-11 sm:h-12 px-6 order-2",children:"Reset"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-4 sm:p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-slate-900 mb-2 sm:mb-3",children:"Original Image"}),(0,a.jsx)("div",{className:"aspect-square bg-slate-100 rounded-lg overflow-hidden mb-3 sm:mb-4 flex items-center justify-center",children:p&&(0,a.jsx)("img",{src:p,alt:"Original",className:"max-w-full max-h-full object-contain"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Size:"})," ",y(R)]}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-slate-600 truncate",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Name:"})," ",h.name]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-4 sm:p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-slate-900 mb-2 sm:mb-3",children:"Compressed Image"}),(0,a.jsx)("div",{className:"aspect-square bg-slate-100 rounded-lg overflow-hidden mb-3 sm:mb-4 flex items-center justify-center",children:k?(0,a.jsx)("img",{src:k,alt:"Compressed",className:"max-w-full max-h-full object-contain"}):(0,a.jsxs)("div",{className:"text-center p-4 sm:p-6",children:[(0,a.jsx)(o.Z,{className:"h-12 w-12 sm:h-16 sm:w-16 text-slate-300 mx-auto mb-2 sm:mb-3"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-slate-500",children:'Click "Compress" to process'})]})}),w?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Size:"})," ",y(F)]}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm font-semibold text-green-600",children:["Reduced by ",((1-F/R)*100).toFixed(1),"%"]})]}),(0,a.jsxs)(b,{onClick:()=>{var e;if(!w||!h)return;let s=h.name.replace(/\.[^/.]+$/,""),t=(null===(e=h.name.match(/\.[^/.]+$/))||void 0===e?void 0:e[0])||".jpg",a="".concat(s,"-").concat(m,"kb").concat(t),l=URL.createObjectURL(w),r=document.createElement("a");r.href=l,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(l)},className:"w-full h-10 sm:h-11 text-sm sm:text-base font-semibold",children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),"Download Result"]})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-[44px]"}),(0,a.jsx)(b,{onClick:Z,disabled:P,className:"w-full h-10 sm:h-11 text-sm sm:text-base font-semibold",children:P?"Compressing...":"Compress now"})]})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsx)("div",{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&L(t)},e.click()},onDragEnter:I,onDragLeave:I,onDragOver:I,onDrop:e=>{e.preventDefault(),e.stopPropagation(),f(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&L(e.dataTransfer.files[0])},className:"\n                relative border-3 border-dashed rounded-xl sm:rounded-2xl\n                p-8 sm:p-12 md:p-16 lg:p-20\n                transition-all duration-300 cursor-pointer\n                hover:border-slate-400 hover:bg-slate-50/50\n                ".concat(x?"border-slate-500 bg-slate-50 scale-[1.02]":"border-slate-300 bg-white","\n              "),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3 sm:space-y-4",children:[(0,a.jsx)("div",{className:"\n                  p-4 sm:p-6 rounded-full transition-all duration-300\n                  ".concat(x?"bg-slate-200 scale-110":"bg-slate-100","\n                "),children:(0,a.jsx)(i.Z,{className:"\n                    h-10 w-10 sm:h-12 sm:w-12 transition-colors duration-300\n                    ".concat(x?"text-slate-700":"text-slate-500","\n                  "),strokeWidth:2})}),(0,a.jsxs)("div",{className:"text-center px-4",children:[(0,a.jsx)("p",{className:"text-lg sm:text-xl font-semibold text-slate-700 mb-1 sm:mb-2",children:"Click or Drag image here"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-slate-500",children:"Supports JPG, PNG, WebP, and GIF formats"})]})]})})}),(0,a.jsx)("div",{className:"max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5 sm:p-6 shadow-sm",children:[(0,a.jsx)("label",{htmlFor:"targetSize",className:"block text-sm font-semibold text-slate-700 mb-3",children:"Target Size (KB)"}),(0,a.jsx)(u,{id:"targetSize",type:"number",value:m,onChange:e=>c(e.target.value),className:"text-lg h-11 sm:h-12",placeholder:s.toString(),min:"1"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Set your desired file size in kilobytes"})]})})]})]})}}},function(e){e.O(0,[511,869,971,864,744],function(){return e(e.s=1809)}),_N_E=e.O()}]);